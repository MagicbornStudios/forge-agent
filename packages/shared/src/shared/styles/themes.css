:root {
  /* Spotify-inspired dark (default). Near-black background, green accent #1DB954 */
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.97 0 0);
  --card: oklch(0.18 0 0);
  --card-foreground: oklch(0.97 0 0);
  --popover: oklch(0.18 0 0);
  --popover-foreground: oklch(0.97 0 0);
  --primary: oklch(0.62 0.19 149);
  --primary-foreground: oklch(0 0 0);
  --secondary: oklch(0.22 0 0);
  --secondary-foreground: oklch(0.97 0 0);
  --muted: oklch(0.26 0 0);
  --muted-foreground: oklch(0.72 0 0);
  --accent: oklch(0.30 0 0);
  --accent-foreground: oklch(1 0 0);
  --destructive: oklch(0.60 0.22 25);
  --destructive-foreground: oklch(1 0 0);
  --border: oklch(0.34 0 0);
  --input: oklch(0.22 0 0);
  --ring: oklch(0.62 0.19 149);

  /* Canvas/editor + sidebar (aliases for Tailwind) */
  --canvas: var(--graph-canvas);
  --canvas-grid: var(--graph-grid);
  --editor: var(--graph-editor);
  --editor-border: var(--graph-editor-border);
  --sidebar-background: var(--graph-sidebar-bg);
  --sidebar-foreground: var(--text-primary);
  --sidebar-primary: var(--border-active);
  --sidebar-primary-foreground: var(--text-primary);
  --sidebar-accent: var(--control-hover);
  --sidebar-accent-foreground: var(--text-primary);
  --sidebar-border: var(--graph-sidebar-border);
  --sidebar-ring: var(--border-active);
  --sidebar: var(--sidebar-background);

  /* Graph tokens */
  --graph-canvas: oklch(0.16 0 0);
  --graph-grid: oklch(0.22 0 0);
  --graph-editor: oklch(0.18 0 0);
  --graph-editor-border: oklch(0.30 0 0);
  --graph-node-bg: oklch(0.20 0.03 240);
  --graph-node-border: oklch(0.35 0.05 220);
  --graph-node-selected: oklch(0.45 0.12 15);
  --graph-node-dimmed: oklch(0.15 0.02 250);
  --graph-edge-default: oklch(0.42 0 0);
  --graph-edge-default-hover: oklch(0.72 0.22 150);
  --graph-edge-choice-1: oklch(0.55 0.12 15);
  --graph-edge-choice-2: oklch(0.60 0.15 280);
  --graph-edge-choice-3: oklch(0.58 0.12 200);
  --graph-edge-choice-4: oklch(0.62 0.12 120);
  --graph-edge-choice-5: oklch(0.55 0.10 45);
  --graph-edge-loop: oklch(0.60 0.12 60);
  --graph-edge-dimmed: oklch(0.32 0 0);
  --graph-sidebar-bg: oklch(0.1324 0 0);
  --graph-sidebar-border: oklch(0.3211 0 0);

  /* Node-type tokens */
  --node-npc-accent: var(--graph-node-npc-border);
  --node-player-accent: var(--graph-node-player-border);
  --node-conditional-accent: var(--graph-node-conditional-border);
  --node-act-accent: var(--graph-edge-choice-1);
  --node-chapter-accent: var(--graph-edge-choice-2);
  --node-page-accent: var(--graph-edge-choice-3);
  --node-storylet-accent: var(--graph-edge-choice-4);
  --node-detour-accent: var(--graph-edge-choice-5);
  --graph-node-npc-bg: oklch(0.26 0.02 45);
  --graph-node-npc-border: oklch(0.38 0.03 35);
  --graph-node-npc-header: oklch(0.30 0.04 25);
  --graph-node-npc-text: oklch(1.0 0 0);
  --graph-node-npc-selected: oklch(0.72 0.22 150);
  --graph-node-player-bg: oklch(0.26 0.02 280);
  --graph-node-player-border: oklch(0.38 0.04 300);
  --graph-node-player-header: oklch(0.30 0.05 290);
  --graph-node-player-text: oklch(1.0 0 0);
  --graph-node-player-selected: oklch(0.72 0.22 150);
  --graph-node-conditional-bg: oklch(0.26 0.02 150);
  --graph-node-conditional-border: oklch(0.38 0.04 140);
  --graph-node-conditional-header: oklch(0.30 0.05 145);
  --graph-node-conditional-text: oklch(1.0 0 0);
  --graph-node-conditional-selected: oklch(0.72 0.22 150);

  /* Chart + edge choice (aligned) */
  --chart-1: var(--graph-edge-choice-1);
  --chart-2: var(--graph-edge-choice-2);
  --chart-3: var(--graph-edge-choice-3);
  --chart-4: var(--graph-edge-choice-4);
  --chart-5: var(--graph-edge-choice-5);
  --edge-choice-1: var(--graph-edge-choice-1);
  --edge-choice-2: var(--graph-edge-choice-2);
  --edge-choice-3: var(--graph-edge-choice-3);
  --edge-choice-4: var(--graph-edge-choice-4);
  --edge-choice-5: var(--graph-edge-choice-5);

  /* Status tokens */
  --status-error: oklch(0.65 0.20 25);
  --status-error-bg: oklch(0.28 0.08 25);
  --status-warning: oklch(0.70 0.18 70);
  --status-warning-bg: oklch(0.28 0.08 70);
  --status-success: oklch(0.72 0.22 150);
  --status-success-bg: oklch(0.28 0.08 150);
  --status-info: oklch(0.65 0.15 220);
  --status-info-bg: oklch(0.28 0.06 220);

  /* Text/control tokens */
  --text-primary: oklch(1.0 0 0);
  --text-secondary: oklch(0.70 0 0);
  --text-tertiary: oklch(0.50 0 0);
  --text-muted: oklch(0.45 0 0);
  --control-bg: oklch(0.23 0 0);
  --control-border: oklch(0.34 0 0);
  --control-hover: oklch(0.28 0 0);
  --control-active: oklch(0.72 0.22 150);

  /* Flags */
  --flag-dialogue: oklch(0.50 0 0);
  --flag-dialogue-bg: oklch(0.24 0 0);
  --flag-quest: oklch(0.60 0.15 220);
  --flag-quest-bg: oklch(0.26 0.05 220);
  --flag-achievement: oklch(0.70 0.18 70);
  --flag-achievement-bg: oklch(0.28 0.06 70);
  --flag-item: oklch(0.72 0.22 150);
  --flag-item-bg: oklch(0.28 0.06 150);
  --flag-stat: oklch(0.65 0.18 280);
  --flag-stat-bg: oklch(0.28 0.06 280);
  --flag-title: oklch(0.65 0.18 330);
  --flag-title-bg: oklch(0.28 0.06 330);
  --flag-global: oklch(0.60 0.15 45);
  --flag-global-bg: oklch(0.28 0.05 45);

  /* Accent borders */
  --border-active: oklch(0.72 0.22 150);
  --border-hover: oklch(0.50 0.12 150);

  /* Domain accents (used by contexts.css) */
  --domain-forge: oklch(0.72 0.22 150);
  --domain-dialogue: var(--domain-forge);
  --domain-writer: oklch(0.65 0.15 220);
  --domain-ai: oklch(0.72 0.22 150);
  --domain-video: oklch(0.60 0.15 280);
  --domain-character: oklch(0.55 0.12 15);

  --scrollbar-track: transparent;
  --scrollbar-thumb: var(--control-border);
  --scrollbar-thumb-hover: var(--border-hover);
  --font-sans: Inter, system-ui, sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: JetBrains Mono, SFMono-Regular, monospace;
  --radius: 6px;
  --radius-sm: 4px;
  --radius-md: 5px;
  --radius-lg: 6px;
  --radius-xl: 8px;
  --spacing: 0.25rem;
  --tracking-normal: -0.03em;

  /* Density + sizing (compact defaults) */
  --icon-size: 12px;
  --icon-size-sm: 10px;
  --icon-size-lg: 14px;
  --control-height: 1.75rem;
  --control-height-sm: 1.5rem;
  --control-padding-x: 0.625rem;
  --control-padding-y: 0.25rem;
  --control-gap: 0.375rem;
  --panel-padding: 0.625rem;
  --menu-item-padding-x: 0.625rem;
  --menu-item-padding-y: 0.5rem;
  --menu-content-padding: 0.375rem;
  --toolbar-height: 2.5rem;
  --header-height: 2.75rem;
  --tab-height: 2rem;
  --status-height: 1.75rem;
  --dialog-max-w-sm: 28rem;
  --dialog-max-w-md: 36rem;
  --dialog-max-w-lg: 42rem;
  --dialog-max-w-full: min(94vw, 72rem);
  --dialog-max-h-full: 88vh;
  --badge-padding-x: 0.5rem;
  --badge-padding-y: 0.125rem;

  /* Shadows (soft, professional â€” default for all chrome) */
  --shadow-x: 0;
  --shadow-y: 1px;
  --shadow-blur: 2px;
  --shadow-spread: 0;
  --shadow-opacity: 0.15;
  --shadow-color: hsl(0, 0%, 0%);
  --shadow-2xs: 0 1px 2px 0 hsl(0 0% 0% / 0.08);
  --shadow-xs: 0 1px 3px 0 hsl(0 0% 0% / 0.12), 0 1px 2px -1px hsl(0 0% 0% / 0.08);
  --shadow-sm: 0 1px 3px 0 hsl(0 0% 0% / 0.15), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow: 0 2px 4px -1px hsl(0 0% 0% / 0.12), 0 2px 4px -2px hsl(0 0% 0% / 0.08);
  --shadow-md: 0 4px 6px -1px hsl(0 0% 0% / 0.15), 0 2px 4px -2px hsl(0 0% 0% / 0.1);
  --shadow-lg: 0 10px 15px -3px hsl(0 0% 0% / 0.15), 0 4px 6px -4px hsl(0 0% 0% / 0.1);
  --shadow-xl: 0 20px 25px -5px hsl(0 0% 0% / 0.12), 0 8px 10px -6px hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0 25px 50px -12px hsl(0 0% 0% / 0.2);

  /* Sharp shadows (legacy; use only for one-off UI that needs hard offset) */
  --shadow-sharp-xs: 2px 2px 0px 0px hsl(0 0% 0% / 0.50);
  --shadow-sharp-sm: 2px 2px 0px 0px hsl(0 0% 0% / 1.00), 2px 1px 2px -1px hsl(0 0% 0% / 1.00);

  /* Legacy shadow tokens (kept for compatibility) */
  --shadow-df-sm: var(--shadow-sm);
  --shadow-df-md: var(--shadow-md);
  --shadow-df-lg: var(--shadow-lg);
  --shadow-df-glow: 0 0 12px oklch(0.72 0.22 150 / 0.3);

  /* Focus and selection: subtle ring, no heavy glow. Panel accent = border only. */
  --glow-focus: 0 0 0 2px var(--ring);
  --glow-selection: 0 0 0 2px var(--ring);
  --glow-panel-accent: 0 0 0 1px var(--border-active);

  /* Soft shadow aliases (same as default scale) */
  --shadow-soft-sm: var(--shadow-sm);
  --shadow-soft-md: var(--shadow-md);
  --shadow-soft-lg: var(--shadow-lg);
}

:is(html[data-density='compact'], [data-density='compact']) {
  --control-height: 1.75rem;
  --control-height-sm: 1.5rem;
  --control-padding-x: 0.625rem;
  --control-padding-y: 0.25rem;
  --control-gap: 0.375rem;
  --panel-padding: 0.625rem;
  --menu-item-padding-x: 0.625rem;
  --menu-item-padding-y: 0.5rem;
  --menu-content-padding: 0.375rem;
  --toolbar-height: 2.5rem;
  --header-height: 2.75rem;
  --tab-height: 2rem;
  --status-height: 1.75rem;
  --dialog-max-w-sm: 28rem;
  --dialog-max-w-md: 36rem;
  --dialog-max-w-lg: 42rem;
  --dialog-max-w-full: min(94vw, 72rem);
  --dialog-max-h-full: 88vh;
  --badge-padding-x: 0.5rem;
  --badge-padding-y: 0.125rem;
}

:is(html[data-density='comfortable'], [data-density='comfortable']) {
  --control-height: 2.25rem;
  --control-height-sm: 2rem;
  --control-padding-x: 0.75rem;
  --control-padding-y: 0.375rem;
  --control-gap: 0.375rem;
  --panel-padding: 0.75rem;
  --menu-item-padding-x: 0.5rem;
  --menu-item-padding-y: 0.5rem;
  --menu-content-padding: 0.375rem;
  --toolbar-height: 2.75rem;
  --header-height: 3rem;
  --tab-height: 2rem;
  --status-height: 1.75rem;
  --dialog-max-w-sm: 30rem;
  --dialog-max-w-md: 40rem;
  --dialog-max-w-lg: 46rem;
  --dialog-max-w-full: min(94vw, 72rem);
  --dialog-max-h-full: 88vh;
  --badge-padding-x: 0.625rem;
  --badge-padding-y: 0.25rem;
}

:is(html[data-theme='dark'], [data-theme='dark']) {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.97 0 0);
  --card: oklch(0.18 0 0);
  --card-foreground: oklch(0.97 0 0);
  --popover: oklch(0.18 0 0);
  --popover-foreground: oklch(0.97 0 0);
  --primary: oklch(0.62 0.19 149);
  --primary-foreground: oklch(0 0 0);
  --secondary: oklch(0.22 0 0);
  --secondary-foreground: oklch(0.97 0 0);
  --muted: oklch(0.26 0 0);
  --muted-foreground: oklch(0.72 0 0);
  --accent: oklch(0.30 0 0);
  --accent-foreground: oklch(1 0 0);
  --destructive: oklch(0.60 0.22 25);
  --destructive-foreground: oklch(1 0 0);
  --border: oklch(0.34 0 0);
  --input: oklch(0.22 0 0);
  --ring: oklch(0.62 0.19 149);
  --graph-canvas: oklch(0.14 0 0);
  --graph-grid: oklch(0.20 0 0);
  --graph-editor: oklch(0.17 0 0);
  --graph-editor-border: oklch(0.28 0 0);
  --graph-node-bg: oklch(0.20 0.03 240);
  --graph-node-border: oklch(0.33 0.05 220);
  --graph-node-selected: oklch(0.45 0.12 15);
  --graph-node-dimmed: oklch(0.14 0.02 250);
  --graph-node-npc-bg: oklch(0.24 0.02 45);
  --graph-node-npc-border: oklch(0.36 0.03 35);
  --graph-node-npc-header: oklch(0.28 0.04 25);
  --graph-node-npc-text: oklch(1 0 0);
  --graph-node-npc-selected: oklch(0.62 0.19 149);
  --graph-node-player-bg: oklch(0.24 0.02 280);
  --graph-node-player-border: oklch(0.36 0.04 300);
  --graph-node-player-header: oklch(0.28 0.05 290);
  --graph-node-player-text: oklch(1 0 0);
  --graph-node-player-selected: oklch(0.62 0.19 149);
  --graph-node-conditional-bg: oklch(0.24 0.02 150);
  --graph-node-conditional-border: oklch(0.36 0.04 140);
  --graph-node-conditional-header: oklch(0.28 0.05 145);
  --graph-node-conditional-text: oklch(1 0 0);
  --graph-edge-default: oklch(0.40 0 0);
  --graph-edge-default-hover: oklch(0.62 0.19 149);
  --graph-edge-choice-1: oklch(0.55 0.12 15);
  --graph-edge-choice-2: oklch(0.58 0.15 280);
  --graph-edge-choice-3: oklch(0.56 0.12 200);
  --graph-edge-choice-4: oklch(0.60 0.12 120);
  --graph-edge-choice-5: oklch(0.54 0.10 45);
  --graph-edge-loop: oklch(0.58 0.12 60);
  --graph-edge-dimmed: oklch(0.30 0 0);
  --graph-sidebar-bg: oklch(0.12 0 0);
  --graph-sidebar-border: oklch(0.30 0 0);
  --status-error: oklch(0.62 0.20 25);
  --status-error-bg: oklch(0.26 0.08 25);
  --status-warning: oklch(0.68 0.18 70);
  --status-warning-bg: oklch(0.26 0.08 70);
  --status-success: oklch(0.62 0.19 150);
  --status-success-bg: oklch(0.26 0.08 150);
  --status-info: oklch(0.62 0.15 220);
  --status-info-bg: oklch(0.26 0.06 220);
  --text-primary: oklch(1 0 0);
  --text-secondary: oklch(0.72 0 0);
  --text-tertiary: oklch(0.55 0 0);
  --text-muted: oklch(0.50 0 0);
  --control-bg: oklch(0.23 0 0);
  --control-border: oklch(0.32 0 0);
  --control-hover: oklch(0.28 0 0);
  --control-active: oklch(0.62 0.19 149);
  --flag-dialogue: oklch(0.50 0 0);
  --flag-dialogue-bg: oklch(0.22 0 0);
  --flag-quest: oklch(0.58 0.15 220);
  --flag-quest-bg: oklch(0.24 0.05 220);
  --flag-achievement: oklch(0.68 0.18 70);
  --flag-achievement-bg: oklch(0.26 0.06 70);
  --flag-item: oklch(0.62 0.19 150);
  --flag-item-bg: oklch(0.26 0.06 150);
  --flag-stat: oklch(0.62 0.18 280);
  --flag-stat-bg: oklch(0.26 0.06 280);
  --flag-title: oklch(0.62 0.18 330);
  --flag-title-bg: oklch(0.26 0.06 330);
  --flag-global: oklch(0.58 0.15 45);
  --flag-global-bg: oklch(0.26 0.05 45);
  --border-active: oklch(0.62 0.19 149);
  --border-hover: oklch(0.50 0.12 149);
}

:is(html[data-theme='light'], [data-theme='light']) {
  --background: oklch(0.99 0 0);
  --foreground: oklch(0.15 0.02 250);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.15 0.02 250);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.15 0.02 250);
  --primary: oklch(0.50 0.18 150);
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.94 0 0);
  --secondary-foreground: oklch(0.20 0.02 250);
  --muted: oklch(0.95 0 0);
  --muted-foreground: oklch(0.45 0.02 250);
  --accent: oklch(0.93 0 0);
  --accent-foreground: oklch(0.15 0.02 250);
  --destructive: oklch(0.55 0.22 25);
  --destructive-foreground: oklch(1 0 0);
  --border: oklch(0.88 0 0);
  --input: oklch(0.93 0 0);
  --ring: oklch(0.50 0.18 150);
  --graph-canvas: oklch(0.98 0.01 250);
  --graph-grid: oklch(0.85 0.01 250);
  --graph-editor: oklch(0.98 0.01 240);
  --graph-editor-border: oklch(0.70 0.03 250);
  --graph-node-bg: var(--card);
  --graph-node-border: var(--control-border);
  --graph-node-selected: oklch(0.45 0.20 280);
  --graph-node-dimmed: var(--control-hover);
  --graph-node-npc-bg: oklch(0.90 0.03 45);
  --graph-node-npc-border: oklch(0.60 0.08 35);
  --graph-node-npc-header: oklch(0.85 0.05 25);
  --graph-node-npc-text: var(--text-primary);
  --graph-node-npc-selected: oklch(0.55 0.15 15);
  --graph-node-player-bg: oklch(0.92 0.05 300);
  --graph-node-player-border: oklch(0.55 0.15 310);
  --graph-node-player-header: oklch(0.88 0.08 290);
  --graph-node-player-text: var(--text-primary);
  --graph-node-player-selected: oklch(0.45 0.20 280);
  --graph-node-conditional-bg: oklch(0.91 0.04 150);
  --graph-node-conditional-border: oklch(0.58 0.12 140);
  --graph-node-conditional-header: oklch(0.88 0.06 145);
  --graph-node-conditional-text: var(--text-primary);
  --graph-edge-default: oklch(0.60 0.03 250);
  --graph-edge-default-hover: oklch(0.50 0.05 250);
  --graph-edge-choice-1: oklch(0.50 0.18 15);
  --graph-edge-choice-2: oklch(0.45 0.20 280);
  --graph-edge-choice-3: oklch(0.48 0.18 200);
  --graph-edge-choice-4: oklch(0.42 0.16 120);
  --graph-edge-choice-5: oklch(0.50 0.15 45);
  --graph-edge-loop: oklch(0.45 0.15 60);
  --graph-edge-dimmed: oklch(0.75 0.02 250);
  --graph-sidebar-bg: oklch(0.9696 0 0);
  --graph-sidebar-border: oklch(0 0 0);
  --status-error: oklch(0.45 0.22 25);
  --status-error-bg: oklch(0.92 0.08 25);
  --status-warning: oklch(0.35 0.18 70);
  --status-warning-bg: oklch(0.92 0.08 70);
  --status-success: oklch(0.40 0.18 150);
  --status-success-bg: oklch(0.92 0.08 150);
  --status-info: oklch(0.45 0.15 220);
  --status-info-bg: oklch(0.92 0.06 220);
  --text-primary: oklch(0.15 0.02 250);
  --text-secondary: oklch(0.35 0.02 250);
  --text-tertiary: oklch(0.55 0.02 250);
  --text-muted: var(--text-tertiary);
  --control-bg: oklch(0.95 0.01 260);
  --control-border: oklch(0.70 0.03 250);
  --control-hover: oklch(0.88 0.02 250);
  --control-active: oklch(0.50 0.18 150);
  --flag-dialogue: oklch(0.55 0.03 250);
  --flag-dialogue-bg: oklch(0.90 0.01 250);
  --flag-quest: oklch(0.50 0.15 220);
  --flag-quest-bg: oklch(0.88 0.05 220);
  --flag-achievement: oklch(0.40 0.18 70);
  --flag-achievement-bg: oklch(0.90 0.08 70);
  --flag-item: oklch(0.45 0.15 150);
  --flag-item-bg: oklch(0.90 0.05 150);
  --flag-stat: oklch(0.45 0.18 280);
  --flag-stat-bg: oklch(0.90 0.08 280);
  --flag-title: oklch(0.45 0.18 330);
  --flag-title-bg: oklch(0.90 0.08 330);
  --flag-global: oklch(0.50 0.15 45);
  --flag-global-bg: oklch(0.90 0.05 45);
  --border-active: oklch(0.50 0.18 150);
  --border-hover: oklch(0.55 0.15 150);

  /* Shadows (soft, same as default) */
  --shadow-2xs: 0 1px 2px 0 hsl(0 0% 0% / 0.08);
  --shadow-xs: 0 1px 3px 0 hsl(0 0% 0% / 0.12), 0 1px 2px -1px hsl(0 0% 0% / 0.08);
  --shadow-sm: 0 1px 3px 0 hsl(0 0% 0% / 0.15), 0 1px 2px -1px hsl(0 0% 0% / 0.1);
  --shadow: 0 2px 4px -1px hsl(0 0% 0% / 0.12), 0 2px 4px -2px hsl(0 0% 0% / 0.08);
  --shadow-md: 0 4px 6px -1px hsl(0 0% 0% / 0.15), 0 2px 4px -2px hsl(0 0% 0% / 0.1);
  --shadow-lg: 0 10px 15px -3px hsl(0 0% 0% / 0.15), 0 4px 6px -4px hsl(0 0% 0% / 0.1);
  --shadow-xl: 0 20px 25px -5px hsl(0 0% 0% / 0.12), 0 8px 10px -6px hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0 25px 50px -12px hsl(0 0% 0% / 0.2);

  --shadow-df-sm: var(--shadow-sm);
  --shadow-df-md: var(--shadow-md);
  --shadow-df-lg: var(--shadow-lg);
}
