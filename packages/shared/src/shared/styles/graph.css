/* ==========================================================================
   React Flow theme overrides (viewport, default node, default edge)
   Uses --graph-* tokens from themes.css; respects data-theme and data-domain.
   Node styling: custom nodes use data-node-type + --graph-node-{type}-* tokens;
   selection highlight is on the node (inset box-shadow), not the wrapper.
   ========================================================================== */

.react-flow__background {
  background-color: var(--graph-canvas);
}

.react-flow__node {
  background-color: transparent;
  border: none;
  outline: none;
  box-shadow: none;
}

.react-flow__node.selected {
  outline: none;
  box-shadow: none;
}

/* Suppress resize/selection UI borders that can cause double-border effect */
.react-flow__resize-control,
.react-flow__nodesselection {
  border: none;
  outline: none;
}

.react-flow__edge-path {
  stroke: var(--graph-edge-default);
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:hover .react-flow__edge-path {
  stroke: var(--graph-edge-default-hover);
}

/* ==========================================================================
   Dialogue graph choice edges and handles (existing)
   ========================================================================== */

.dialogue-graph-editor [data-choice-index] {
  --edge-color: var(--edge-choice-1);
  --edge-color-muted: color-mix(in oklab, var(--edge-color) 60%, black);
}

.dialogue-graph-editor [data-choice-index="0"] {
  --edge-color: var(--edge-choice-1);
}

.dialogue-graph-editor [data-choice-index="1"] {
  --edge-color: var(--edge-choice-2);
}

.dialogue-graph-editor [data-choice-index="2"] {
  --edge-color: var(--edge-choice-3);
}

.dialogue-graph-editor [data-choice-index="3"] {
  --edge-color: var(--edge-choice-4);
}

.dialogue-graph-editor [data-choice-index="4"] {
  --edge-color: var(--edge-choice-5);
}

.dialogue-graph-editor .forge-choice-color {
  color: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-border {
  border-color: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-border-top {
  border-top-color: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-border-bottom {
  border-bottom-color: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-handle {
  border-color: var(--edge-color);
  border-style: solid;
  border-width: 2px;
  background-color: var(--control-bg);
  transition: border-color 0.2s ease, background-color 0.2s ease;
}

.dialogue-graph-editor .forge-choice-handle:hover {
  border-color: var(--edge-color);
  background-color: color-mix(in oklab, var(--edge-color) 20%, var(--control-bg));
}

.dialogue-graph-editor .forge-choice-input {
  border-color: var(--border);
}

.dialogue-graph-editor .forge-choice-input[data-has-next="true"] {
  border-color: var(--edge-color-muted);
}

.dialogue-graph-editor .forge-choice-input[data-has-text="true"] {
  border-color: var(--edge-color-muted);
}

.dialogue-graph-editor .forge-choice-input:focus {
  border-color: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-edge .forge-edge-path {
  stroke: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-edge.is-loop:not(.is-dimmed) .forge-edge-path {
  stroke: var(--graph-edge-loop);
}

.dialogue-graph-editor .forge-choice-edge.is-dimmed .forge-edge-path {
  stroke: var(--graph-edge-dimmed);
}

.dialogue-graph-editor .forge-choice-edge .forge-choice-arrow {
  stroke: var(--edge-color);
  fill: var(--edge-color);
}

.dialogue-graph-editor .forge-choice-edge.is-loop:not(.is-dimmed) .forge-choice-arrow {
  stroke: var(--graph-edge-loop);
  fill: var(--graph-edge-loop);
}

.dialogue-graph-editor .forge-edge.is-draft .react-flow__edge-path,
.dialogue-graph-editor .forge-choice-edge.is-draft .react-flow__edge-path {
  stroke: var(--status-warning);
}

.dialogue-graph-editor .forge-choice-edge.is-draft .forge-choice-arrow {
  stroke: var(--status-warning);
  fill: var(--status-warning);
}
