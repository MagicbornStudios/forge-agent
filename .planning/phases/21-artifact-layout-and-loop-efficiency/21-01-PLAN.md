# Plan 21-01: Artifact layout for users

## Goal

Decide and document how `.planning` (and related) artifacts are **laid out for users** in Repo Studio: which artifacts appear in which panels or groups, viewport vs tree usage, and consistency with the "Workspace and panel composition" rules in [styling-and-ui-consistency.md](../../../docs/agent-artifacts/core/styling-and-ui-consistency.md).

## Scope

- List core planning artifacts (PRD, STATE, ROADMAP, DECISIONS, ERRORS, TASK-REGISTRY, HUMAN-TASKS, DoD, phase docs) and decide: which are first-class panels vs grouped (e.g. Overview tab: PRD, Status, Decisions; Work tab: Phases, Tasks, Documents).
- Viewport: planning docs open as viewport tabs; tree (Documents panel) is primary navigation. No duplicate list panel for same role.
- Optional output: short "artifact layout spec" in `.planning` or `docs/agent-artifacts/core/` (e.g. which panel ids map to which artifacts, max left-rail panels or grouping contract).
- **User workflow:** Document how we expect users to use planning and parsed info: (1) **Blocking** — human todos and "blocked by HT-xx" visible in panels/list/tree; (2) **Notifications** — human-blocked badge, status strip, toast settings (Phase 20-03); (3) **Chat** — what appears in chat (loop/workspace context, suggested next), workflow (see blocking → use assistant → plan tools). Layout should support this (e.g. Human TODOs and Tasks visible without opening viewport; assistant one click away).
- **Badges and hover:** Badges on **task list items**, **phase list items**, and **tree** (wave, depends, "blocked by"). **Hover:** popup with more info (summary, doc reference, section) — not just a tooltip. **Click:** open the referenced doc in viewport and navigate to the section.

## Out of scope

- Implementing UI changes (Phase 20 or 22).
- Non-planning workspaces (Code, Git, Story, etc.) except where they share the same composition rules.

## Tasks

| ID | Task | Status |
|----|------|--------|
| FRG-2101 | Document artifact layout decisions: which artifacts in which panels/groups; viewport vs tree; align with panel discipline (e.g. 3–4 or grouped left rail) | Pending |
| FRG-2102 | Optional: Add short artifact layout spec or DECISIONS entry for Repo Studio Planning workspace panel-to-artifact mapping | Pending |
| FRG-2105 | Document user workflow: blocking visibility, notifications (human-blocked, execution/other loops), what appears in chat, and how layout supports it | Pending |
| FRG-2106 | Document badge placement (task list, phase list, tree) and hover popup + click-to-open-doc behavior | Pending |

## Done criteria

- Decisions recorded in DECISIONS and/or a spec; Phase 20 and 22 can use them when adding or refactoring panels.
