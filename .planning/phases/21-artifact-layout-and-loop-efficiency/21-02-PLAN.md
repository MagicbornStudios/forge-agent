# Plan 21-02: Loop efficiency

## Goal

Decide and document how **loops remain efficient** when using Repo Studio: context (loopId, workspaceId, selectedDocId), plan-specific tools (add task, update status, open planning doc), cadence, and human/agent handoffs. Reference Phase 19 (context and tools), HUMAN-TASKS.md, and DEFINITION-OF-DONE.md.

## Scope

- **Context:** Assistant receives correct loop/workspace/doc on every request (Phase 19-01). Document that this is required for loop efficiency and any fallback rules.
- **Tools:** add_task, update_task_status, open_planning_doc (Phase 19-02) scoped to active loop. Document how tools reduce round-trips and keep the loop efficient.
- **Cadence and handoffs:** When to check HUMAN-TASKS, when to use DoD for stage completion, how agent and human hand off (e.g. "blocked by HT-xx" in TASK-REGISTRY). Optional: short "loop efficiency checklist" in `.planning` or `docs/agent-artifacts/core/`.

## Out of scope

- Implementing new tools or API changes (Phase 19).
- Changing HUMAN-TASKS or DoD format.

## Tasks

| ID | Task | Status |
|----|------|--------|
| FRG-2103 | Document loop efficiency decisions: context requirements, tool usage, cadence and human/agent handoffs; reference Phase 19, HUMAN-TASKS, DoD | Pending |
| FRG-2104 | Optional: Add loop efficiency checklist or DECISIONS entry for agents and Codex | Pending |

## Done criteria

- Decisions and optionally a checklist recorded; agents and implementers can reference them for Phase 19/20 and future loop tooling.
