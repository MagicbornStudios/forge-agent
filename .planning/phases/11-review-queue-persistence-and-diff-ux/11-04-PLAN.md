---
phase: 11-review-queue-persistence-and-diff-ux
plan: 04
wave: 4
depends_on:
  - 11-03
files_modified:
  - packages/repo-studio/README.md
  - packages/repo-studio/docs/05-assistant.md
  - packages/repo-studio/docs/06-story-domain.md
  - apps/repo-studio/__tests__/review-queue/proposal-diff-parser.test.mjs
  - apps/repo-studio/__tests__/review-queue/proposal-store.test.mjs
  - .planning/DECISIONS.md
  - .planning/ERRORS.md
  - .planning/STATE.md
  - .planning/TASK-REGISTRY.md
  - .planning/phases/11-review-queue-persistence-and-diff-ux/11-01-SUMMARY.md
  - .planning/phases/11-review-queue-persistence-and-diff-ux/11-02-SUMMARY.md
  - .planning/phases/11-review-queue-persistence-and-diff-ux/11-03-SUMMARY.md
  - .planning/phases/11-review-queue-persistence-and-diff-ux/11-04-SUMMARY.md
autonomous: true
must_haves:
  truths:
    - "Phase 11 closeout requires docs, tests, and strict verification evidence."
    - "Review Queue trust mode and migration behavior must be documented for operators and agents."
    - "Phase 11 artifacts must be traceable across roadmap/state/task/decisions/errors."
  artifacts:
    - path: ".planning/phases/11-review-queue-persistence-and-diff-ux/11-04-SUMMARY.md"
      provides: "Final closeout summary with verification evidence and follow-up notes."
      min_lines: 10
  key_links:
    - from: ".planning/ROADMAP.md"
      to: ".planning/phases/11-review-queue-persistence-and-diff-ux/11-04-SUMMARY.md"
      via: "phase closeout verification trace"
---

<objective>
Complete Phase 11 documentation/tests/strict verification and publish closeout summaries with decision/error traceability.
</objective>

<context>
@packages/repo-studio/README.md
@packages/repo-studio/docs/05-assistant.md
@packages/repo-studio/docs/06-story-domain.md
@.planning/REQUIREMENTS.md
</context>

<tasks>
<task type="auto">
  <name>Add proposal persistence and diff parser regression tests</name>
  <files>apps/repo-studio/__tests__/review-queue/*.test.mjs</files>
  <action>Cover idempotent transition behavior, JSON import idempotency, and diff parser deterministic file/hunk extraction.</action>
  <verify>New tests pass consistently in app test suite.</verify>
  <done>Phase 11 reliability-critical behaviors are regression-protected.</done>
</task>

<task type="auto">
  <name>Update runbooks and README with trust/migration behavior</name>
  <files>packages/repo-studio/README.md, packages/repo-studio/docs/05-assistant.md, packages/repo-studio/docs/06-story-domain.md</files>
  <action>Document trust modes, scope guard invariants, and JSON->SQLite migration/fallback semantics.</action>
  <verify>Docs match implemented behavior and include remediation steps.</verify>
  <done>Operators and agents can run Review Queue workflows without ambiguity.</done>
</task>

<task type="auto">
  <name>Run strict verification and publish phase summaries</name>
  <files>.planning/phases/11-review-queue-persistence-and-diff-ux/11-0*-SUMMARY.md, .planning/STATE.md, .planning/TASK-REGISTRY.md, .planning/DECISIONS.md, .planning/ERRORS.md</files>
  <action>Execute verification gates, capture outcomes in summaries, and close phase/task states only on strict pass.</action>
  <verify>`pnpm forge-loop verify-work 11 --strict` passes with expected build/lint/test evidence.</verify>
  <done>Phase 11 reaches traceable strict-verified completion state.</done>
</task>
</tasks>
