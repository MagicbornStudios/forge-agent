# Plan 25-01: Concept simulation workspace extension

## Goal

Implement the **concept simulation workspace** (general-purpose; games as primary focus) as an extension workspace: register the workspace, provide its own **parser** and **write path** for docs, tree + viewport similar to Planning, **fixed naming**, project folder **`.concept`**, and a **simulation entry point** (e.g. `agent.md`) that Codex uses to run the simulation. **System prompt** for workspace scope and behavior.

## Scope

- **Workspace registration:** Add "concept simulation" to workspace catalog / extension adapters; workspace works in a project folder (e.g. repo root or a designated path) containing `.concept`.
- **Parser and doc writes:** Own parser for concept/simulation docs (GRD, .concept files); create/update files with conventions that display well in the workspace (similar to Planning).
- **UI:** Tree + viewport; list and open docs; fixed naming so tree and panels show consistent structure.
- **`.concept`:** Project folder the workspace operates on; simulation content (entry point, scenes, state) lives here.
- **Entry point:** Define and wire simulation entry point (e.g. `agent.md` or config) so Codex can be pointed at it for simulation runs.
- **System prompt:** Workspace-scoped system prompt so assistant knows how to behave (concept simulation loop; simulate as if product/game/software already exists and build upon it).

## Out of scope

- Scoping the assistant to workspace-only context during simulation (25-02).
- Two-loop handoff implementation (25-02).
- Changing Phase 24 loop model (only consume its naming).

## Tasks

| ID | Task | Status |
|----|------|--------|
| FRG-2501 | Register concept simulation workspace in catalog/extension adapters; define workspace id and .concept path | Pending |
| FRG-2502 | Implement or adopt parser for concept/simulation docs; define write path and file naming for display | Pending |
| FRG-2503 | Tree + viewport UI for concept simulation (reuse Planning-like pattern); fixed naming in tree | Pending |
| FRG-2504 | Define simulation entry point (e.g. agent.md) and document for Codex/skills | Pending |
| FRG-2504a | Add workspace-scoped system prompt for concept simulation behavior and scope | Pending |
| FRG-2504b | Concept type selection: first-class types (game, story, software); type fixed at creation | Pending |
| FRG-2504c | Deprecate Story extension; migrate Story as concept type "story" into concept workspace | Pending |
| FRG-2504d | Ensure concept workspace src downloadable into user project for extension | Pending |

## Done criteria

- Concept workspace appears as extension; first-class types (game, story, software); type immutable; Story deprecated; src downloadable for user extension; entry point and system prompt defined.

## Reference

- Use `.tmp/dungeonbreak-docs-reference/` (after `pnpm reference:copy-dungeonbreak`) for structure and naming ideas; do not edit our .planning from that copy.
