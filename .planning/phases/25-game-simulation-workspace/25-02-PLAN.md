# Plan 25-02: Two-loop handoff and scoping

## Goal

Implement **two-loop model** and **assistant scoping** for the game simulation workspace: (1) **Concept/simulation loop** — GRD, .concept, simulation entry point; (2) **Software/PRD loop** — implementation. **Handoff** from simulation to PRD. During simulation, the **assistant (Codex) is scoped only to the game simulation workspace docs** (e.g. .concept); no other repo context. Workspace cares about **one game loop + one PRD**.

## Scope

- **Scoping:** When "game simulation" workspace is active and simulation is running, assistant context (Codex) is restricted to the workspace's docs (e.g. .concept and related GRD); no visibility of other repo files for that session.
- **Two loops:** Document and wire concept loop vs PRD loop; concept loop owns GRD and .concept; PRD loop owns product/implementation artifacts; handoff process (simulation output → review → PRD update).
- **One game loop + one PRD:** Workspace assumes a single game loop and single PRD; no multi-loop UI within the game simulation workspace itself (multi-loop is at Repo Studio level per Phase 24).

## Out of scope

- Building the simulation content or DM logic (that lives in the user's .concept and entry point).
- Phase 24 loop index changes (only consume loop IDs and naming).

## Tasks

| ID | Task | Status |
|----|------|--------|
| FRG-2505 | Implement assistant scoping for game simulation: when workspace active + simulation, limit Codex context to workspace docs only | Pending |
| FRG-2506 | Document and implement two-loop handoff: concept loop (GRD, .concept) vs PRD loop; handoff from simulation to PRD | Pending |
| FRG-2507 | Enforce one game loop + one PRD per game simulation workspace in UI or config | Pending |

## Done criteria

- During simulation, Codex sees only game simulation workspace docs. Two-loop handoff is documented and wired. One game loop + one PRD per workspace is clear and enforced where appropriate.
