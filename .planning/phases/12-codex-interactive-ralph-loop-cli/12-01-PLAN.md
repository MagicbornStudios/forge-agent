---
phase: 12-codex-interactive-ralph-loop-cli
plan: 01
wave: 1
depends_on: []
files_modified:
  - packages/forge-loop/src/lib/config.mjs
  - packages/forge-loop/src/lib/runtime/contracts.mjs
  - packages/forge-loop/src/lib/runtime/provider-prompt-pack.mjs
  - packages/forge-loop/src/lib/runtime/provider-codex.mjs
  - packages/forge-loop/src/lib/runtime/resolver.mjs
  - packages/forge-loop/src/lib/runtime/results.mjs
  - .planning/config.json
autonomous: true
must_haves:
  truths:
    - "forge-loop supports runtime provider abstraction without removing existing prompt-pack flow."
    - "Runtime config accepts legacy string and new object shapes."
  artifacts:
    - path: ".planning/phases/12-codex-interactive-ralph-loop-cli/12-01-SUMMARY.md"
      provides: "Provider abstraction and config normalization implementation summary."
      min_lines: 10
  key_links:
    - from: ".planning/REQUIREMENTS.md"
      to: ".planning/phases/12-codex-interactive-ralph-loop-cli/12-01-SUMMARY.md"
      via: "REQ-26 runtime abstraction trace"
---

<objective>
Add runtime provider contracts and resolver plumbing so discuss/plan/execute can select prompt-pack or codex runners deterministically.
</objective>

<context>
@packages/forge-loop/src/lib/config.mjs
@packages/forge-loop/src/commands/discuss-phase.mjs
@packages/forge-loop/src/commands/plan-phase.mjs
@packages/forge-loop/src/commands/execute-phase.mjs
@.planning/config.json
</context>

<tasks>
<task type="auto">
  <name>Create runtime provider modules</name>
  <files>packages/forge-loop/src/lib/runtime/contracts.mjs, packages/forge-loop/src/lib/runtime/provider-prompt-pack.mjs, packages/forge-loop/src/lib/runtime/provider-codex.mjs, packages/forge-loop/src/lib/runtime/resolver.mjs, packages/forge-loop/src/lib/runtime/results.mjs</files>
  <action>Define provider contracts, result helpers, and resolver behavior for runner selection and fallback.</action>
  <verify>Resolver consistently chooses expected runner under `--runner`, config mode, and fallback scenarios.</verify>
  <done>Commands can consume runtime provider API instead of direct hardcoded runtime checks.</done>
</task>

<task type="auto">
  <name>Normalize runtime config shape with backward compatibility</name>
  <files>packages/forge-loop/src/lib/config.mjs, packages/forge-loop/src/lib/paths.mjs, .planning/config.json</files>
  <action>Support both legacy string runtime and new object runtime in config loader and defaults.</action>
  <verify>Existing projects with `runtime: "prompt-pack"` still load successfully and produce deterministic runtime settings.</verify>
  <done>Runtime settings are normalized into a single internal object contract.</done>
</task>
</tasks>

