---
phase: 02-repostudio-command-center
plan: 05
wave: 5
depends_on: ['02-03', '02-04']
files_modified: []
autonomous: true
must_haves:
  truths:
    - "RepoStudio app and package runtimes expose parity operational APIs for command policy, run streaming, and codex lifecycle."
    - "RepoStudio build blockers are resolved so app runtime compiles and launches cleanly."
  artifacts:
    - path: ".planning/phases/02-repostudio-command-center/02-05-SUMMARY.md"
      provides: "Execution summary for build unblock and runtime parity route delivery."
      min_lines: 12
  key_links:
    - from: ".planning/ROADMAP.md"
      to: ".planning/phases/02-repostudio-command-center/02-05-SUMMARY.md"
      via: "phase-to-summary traceability"
---

<objective>
Unblock RepoStudio app builds and deliver API/runtime parity between app runtime and package runtime.
</objective>

<context>
@apps/repo-studio
@packages/repo-studio
@packages/shared/src/shared/components/docs/showcase
</context>

<tasks>
<task type="auto">
  <name>Fix RepoStudio build blockers</name>
  <files>apps/repo-studio/package.json, packages/shared/src/shared/components/docs/showcase/*, scripts/build-showcase-registry.mjs</files>
  <action>Add missing runtime deps and repair generated showcase typing so app build passes type-check.</action>
  <verify>`pnpm --filter @forge/repo-studio-app build` passes.</verify>
  <done>RepoStudio app runtime is build-stable.</done>
</task>

<task type="auto">
  <name>Add app runtime parity APIs for commands/runs/codex</name>
  <files>apps/repo-studio/app/api/repo/**, apps/repo-studio/src/lib/*</files>
  <action>Expose command list/toggle/view, run start/stream/stop, and codex status/start/stop routes in Next runtime.</action>
  <verify>Routes return machine-readable payloads and enforce allowlist+confirm semantics.</verify>
  <done>App runtime has parity operational control-plane APIs.</done>
</task>

<task type="auto">
  <name>Add package CLI commands for codex + command policy state</name>
  <files>packages/repo-studio/src/cli.mjs, packages/repo-studio/src/commands/*, packages/repo-studio/src/lib/*</files>
  <action>Add `codex-status|codex-start|codex-stop|codex-exec` and command list/toggle/view commands for shared runtime usage.</action>
  <verify>CLI commands run and output structured JSON payloads.</verify>
  <done>Package runtime and app runtime can share the same command/codex contract.</done>
</task>
</tasks>
