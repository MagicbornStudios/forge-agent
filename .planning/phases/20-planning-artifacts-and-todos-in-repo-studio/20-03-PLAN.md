# Plan 20-03: Planning welcome, notifications, status strip, and chat contract

## Goal

When the user opens the **Planning workspace**: **default OFF** for auto-send; show **suggested prompts** to get started (e.g. "What should we work on next?", "Review current state"). Add **status strip** in toolbar (rotating "currently running"), **task completion** and execution notifications, **toast-type settings** to avoid overwhelm, and **configurable scan/parse interval** for planning docs. Document and review the **chat contract** (what appears in chat, what server receives, prefill, suggested prompts) — heavy review required.

## Scope

- **Planning welcome:** Default **off**. Do not auto-send on load. Show suggested prompts so user can click to send; optional setting to enable "welcome on" for power users.
- **Suggested prompts:** Shown as **chips** (clickable). User must select one — not in input, not in chat, not automatic. Chips disappear after selection.
- **Doc reference:** `selectedDocId` is a reference for initial context or when user says "this" / current file; not required.
- **Status strip:** Toolbar area with **rotating cycle** of currently running items (e.g. "Phase 19-02 executing", "Codex on loop X"). Task completion can surface here or as toasts. **Toasts:** Configurable **toast types** (task done, phase done, human-blocked, errors only) via settings UI/codegen.
- **Scan/parse interval:** Default ~30s; configurable in settings. Use existing settings registry and codegen.
- **Chat contract:** Server receives loopId, workspaceId, selectedDocId (optional). **Codex display:** tools used, tasks worked, different text coloring for tool calls, summary; special formatting for agent workflow. **Multi-loop:** user can inspect other loops while agent works in one. See DECISIONS (Phase 20 chat contract and session scope).

## Out of scope

- Changing shared AssistantPanel contract (only Repo Studio Planning workspace behavior).
- Mandatory auto-send on every load without a way to disable.
- Full "other loops" execution dashboard (keep to lightweight status/notification if implemented).

## Tasks

| ID | Task | Status |
|----|------|--------|
| FRG-2006 | Planning welcome default OFF; show suggested prompts as chips (clickable; user must select; chips disappear after selection); no auto-send; optional setting to enable welcome | Pending |
| FRG-2007 | Badges for HUMAN-TASKS open items; status strip (rotating "currently running"); task completion notifications; toast-type settings (settings UI/codegen) | Pending |
| FRG-2008 | Configurable planning scan/parse interval in settings (default ~30s; min/max in DECISIONS); use existing settings registry/codegen | Pending |
| FRG-2009 | Chat contract: document and review (what server receives, prefill, suggested prompts, what appears in chat); capture decisions and open questions in DECISIONS | Pending |

## Done criteria

- Planning welcome is off by default; suggested prompts visible on open.
- Status strip and toast preferences implemented or documented; scan/parse interval configurable.
- Chat contract implemented per DECISIONS; chips, doc reference, Codex display, multi-loop inspect wired.
