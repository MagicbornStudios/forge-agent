---
phase: 15-strategic-shift-repo-studio-platform-focus
plan: 01
wave: 1
depends_on: []
files_modified: []
autonomous: false
gap_closure: false
must_haves:
  truths:
    - "Phase 15 strategic shift is documented: archive Studio app, move Character/Dialogue to extensions repo, deprecate forge graphs and Yarn Spinner dialogue, turn consumer-studio into extension, focus on Repo Studio + platform."
    - "Decisions and tasks are recorded in .planning; ROADMAP and STATE reflect Phase 15."
  artifacts:
    - path: ".planning/phases/15-strategic-shift-repo-studio-platform-focus/15-01-SUMMARY.md"
      provides: "Execution summary for plan 01 (after first discussion/execution)"
      min_lines: 5
  key_links:
    - from: ".planning/ROADMAP.md"
      to: ".planning/phases/15-strategic-shift-repo-studio-platform-focus/"
      via: "Phase 15 entry and plan traceability"
---

# Plan 15-01: Master plan — Strategic shift (Repo Studio + Platform focus)

This plan is the **master document** for the strategic shift. It is intended for **thorough documentation** and **loops of discussion** (discuss → plan → execute → verify). Implementation will be broken into later plans (15-02, 15-03, …) as scope stabilizes.

---

## 1. Summary of the shift

| Area | Current | Target |
|------|--------|--------|
| **Studio app** (`apps/studio`) | Active app with Character + Dialogue workspaces | **Archived**. No new feature work. Preserved for reference/extraction. |
| **Character workspace** | Part of Studio app | **Moved** to extensions submodule (other repo). Consumed as extension. |
| **Dialogue workspace** | Part of Studio app | **Moved** to other repo (extensions). Out of main apps. |
| **Consumer-studio** (`apps/consumer-studio`) | Standalone app | **Turned into extension** (bare-bones reference). Not a main app. |
| **Platform** | Supports Studio, graphs, dialogue, Repo Studio | **Deprecate** forge graphs and Yarn Spinner dialogue. **Focus** on supporting Repo Studio (auth, API keys, desktop connection, OpenRouter proxy, etc.). |
| **Primary product** | Multiple apps | **Repo Studio** + **platform** only. |

---

## 2. Archive Studio app

- **Scope:** The application in `apps/studio` (Studio.tsx, Character workspace, Dialogue workspace, registries, app shell).
- **Actions:**
  - Mark as **archived** in ROADMAP, STATE, and docs (e.g. README or AGENTS). No new feature work.
  - Optionally: move to a separate branch, or add an `ARCHIVED.md` in `apps/studio` stating that this app is archived and Character/Dialogue have moved to extensions.
  - Do **not** delete yet: extraction of Character and Dialogue into the extensions repo comes first; then we can decide whether to remove `apps/studio` from the workspace or keep it as read-only reference.
- **Decisions to log:** Archive Studio app; Character and Dialogue are extracted before any deletion of Studio app code.
- **Tasks:** Create FRG-1501 (archive Studio app – document, optionally relocate or mark read-only).

---

## 3. Move Character workspace to extensions (other repo)

- **Scope:** Character workspace and all Character-specific code (components, routes, types) currently in `apps/studio` or shared.
- **Target:** Extensions submodule or separate repo. That repo (or submodule) follows the same extension contract as Repo Studio extensions (e.g. manifest, layout, workspace kind). Repo Studio (or a future host) loads it from the extensions registry/submodule.
- **Actions:**
  - Create or designate the **extensions repo** (or submodule) as the home for Character.
  - Extract Character workspace into that repo: manifest, panels, workspace definition, any Character-specific API or types.
  - Document the extraction in Phase 15 (15-02 or 15-03 plan) and in DECISIONS.
  - Ensure the extension can be installed/loaded per existing Repo Studio extension mechanism (e.g. `.repo-studio/extensions/<id>` or registry install).
- **Decisions to log:** Character workspace lives in extensions repo; extension id and manifest shape; who maintains the repo (e.g. forge-agent team or community).
- **Tasks:** FRG-1502 (extract Character workspace), FRG-1503 (add Character to extensions repo/submodule and document install path).

---

## 4. Move Dialogue workspace to extensions (other repo)

- **Scope:** Dialogue workspace and all Dialogue-specific code (Yarn Spinner integration, dialogue editor, etc.) in `apps/studio` or shared.
- **Target:** Same extensions repo (or submodule) as Character. Dialogue is a separate extension (or part of a “studio-legacy” extension bundle – to be decided in discussion).
- **Actions:**
  - Extract Dialogue workspace into the extensions repo.
  - Yarn Spinner dialogue support is **deprecated** on the platform; the Dialogue extension may still use it locally or we document it as deprecated and no new platform features for it.
  - Document extraction and deprecation in DECISIONS and in the phase plans.
- **Decisions to log:** Dialogue workspace lives in extensions repo; Yarn Spinner deprecated for platform; extension id and manifest.
- **Tasks:** FRG-1504 (extract Dialogue workspace), FRG-1505 (add Dialogue to extensions repo and document; deprecate Yarn Spinner in platform docs).

---

## 5. Consumer-studio as extension

- **Scope:** `apps/consumer-studio` (the chat-only, companion-runtime-driven app added in Phase 14).
- **Target:** Not a main app. Turn it into a **bare-bones extension** (e.g. “consumer-studio” or “starter-studio”) that lives in the extensions repo. Users can clone or install it as a reference to build their own studios. The main monorepo may remove `apps/consumer-studio` as an app and instead ship the same surface as an extension template.
- **Actions:**
  - Define extension manifest and layout for “consumer-studio” (or equivalent name).
  - Move or copy the minimal app surface (chat + companion runtime) into the extensions repo as an installable extension.
  - Update root workspace: remove or deprecate `apps/consumer-studio` as a package; document that the reference is now an extension.
  - Document in AGENTS and ROADMAP that consumer-studio is an extension, not a main app.
- **Decisions to log:** Consumer-studio is an extension; extension id; removal or retention of `apps/consumer-studio` in monorepo (e.g. keep as template copy vs. delete).
- **Tasks:** FRG-1506 (define consumer-studio extension), FRG-1507 (move consumer-studio surface to extensions repo and update docs/workspace).

---

## 6. Platform: deprecate forge graphs and Yarn Spinner dialogue; support Repo Studio

- **Scope:** Platform app/API (e.g. auth, API keys, desktop connection, OpenRouter proxy, any graph or dialogue APIs).
- **Target:**
  - **Deprecate:** Forge graphs (no new work; no long-term roadmap for graph support). Yarn Spinner dialogue support (deprecated; no new platform features for it).
  - **Keep:** Platform data and APIs that “still work well” (e.g. user/auth, org, API keys, desktop connection validation).
  - **Focus:** Platform supports **Repo Studio** more: desktop auth, connection validation, OpenRouter proxy (so Repo Studio desktop can use company OpenRouter key without shipping it), and any other Repo Studio–specific backend needs.
- **Actions:**
  - Document deprecation of forge graphs and Yarn Spinner dialogue in platform docs and DECISIONS.
  - Audit platform API surface: list what remains supported vs. deprecated.
  - Prioritize platform work for Repo Studio (e.g. proxy endpoint for chat, token/connection lifecycle). Optionally add REQUIREMENTS entries for “platform supports Repo Studio” if not already covered.
- **Decisions to log:** Forge graphs deprecated; Yarn Spinner dialogue deprecated; platform roadmap is Repo Studio–first.
- **Tasks:** FRG-1508 (document platform deprecations and Repo Studio–first roadmap), FRG-1509 (audit platform API surface; optional: add REQ for platform Repo Studio support).

---

## 7. Loop usage and documentation

- **Process:** All work proceeds via the **loop**: discuss → plan → execute → verify. Use `forge-loop` for doctor, progress, sync-legacy. Phases and plans are in `.planning`; decisions in DECISIONS.md; tasks in TASK-REGISTRY.md.
- **Ralph Wiggum:** Each plan and task has clear “done” criteria. After execution, summaries (e.g. 15-01-SUMMARY.md) and STATE/ROADMAP are updated. Legacy snapshots are updated via `forge-loop sync-legacy`.
- **Discussion loops:** This master plan (15-01) is the basis for **loops of discussion**. Follow-on plans (15-02, 15-03, …) will break out implementation slices (e.g. “extract Character,” “deprecate graphs,” “platform Repo Studio proxy”) once discussion stabilizes.

---

## 8. Execution order (proposed)

1. **Document and decide** — Log all decisions (Sections 2–6) in DECISIONS.md. Add Phase 15 to ROADMAP and tasks to TASK-REGISTRY. Update STATE to reflect Phase 15 as planning/discussion. *(This plan, 15-01, accomplishes that.)*
2. **Archive Studio app** — Mark Studio app archived; no new features. (Plan 15-02 or part of 15-01 summary.)
3. **Extensions repo/submodule** — Create or designate repo; document structure and install flow. (Plan 15-02.)
4. **Extract Character** — Move Character workspace to extensions repo; add manifest; document. (Plan 15-03.)
5. **Extract Dialogue** — Move Dialogue workspace to extensions repo; deprecate Yarn Spinner on platform; document. (Plan 15-04.)
6. **Consumer-studio as extension** — Define and move consumer-studio to extensions; update monorepo. (Plan 15-05.)
7. **Platform deprecations and Repo Studio focus** — Document deprecations; audit API; prioritize Repo Studio backend work. (Plan 15-06 or folded into 15-02.)

Order can be adjusted after discussion (e.g. platform docs before extractions).

---

## 9. Files and artifacts to create/update

| Artifact | Action |
|----------|--------|
| `.planning/ROADMAP.md` | Add Phase 15; link to this phase folder. |
| `.planning/STATE.md` | Set phase 15, plan 15-01; status planning/discussion. |
| `.planning/DECISIONS.md` | Log: archive Studio; Character/Dialogue to extensions; consumer-studio as extension; deprecate graphs and Yarn Spinner; platform Repo Studio–first. |
| `.planning/TASK-REGISTRY.md` | Add FRG-1501 through FRG-1509 (or as many as needed). |
| `.planning/REQUIREMENTS.md` | Optionally add REQ for platform Repo Studio support; trace to Phase 15. |
| `.planning/phases/15-.../15-01-SUMMARY.md` | Create after first execution pass (summary of what was documented and what’s next). |
| `AGENTS.md` or `docs/` | Update to state that Studio app is archived and Repo Studio + platform are the focus. |
| `apps/studio/ARCHIVED.md` (optional) | Add if we keep the app in tree with a clear “archived” notice. |

---

## 10. Tasks (to register in TASK-REGISTRY)

| Task ID | Description | Status |
|---------|-------------|--------|
| FRG-1501 | Archive Studio app: document, mark archived in ROADMAP/STATE/docs; optional ARCHIVED.md in apps/studio. | Pending |
| FRG-1502 | Extract Character workspace from apps/studio into extension-shaped module. | Pending |
| FRG-1503 | Add Character extension to extensions repo/submodule; document install and manifest. | Pending |
| FRG-1504 | Extract Dialogue workspace from apps/studio into extension-shaped module. | Pending |
| FRG-1505 | Add Dialogue extension to extensions repo; document; deprecate Yarn Spinner in platform docs. | Pending |
| FRG-1506 | Define consumer-studio as extension (manifest, layout, bare-bones reference). | Pending |
| FRG-1507 | Move consumer-studio surface to extensions repo; update monorepo and docs. | Pending |
| FRG-1508 | Document platform deprecations (forge graphs, Yarn Spinner) and Repo Studio–first roadmap. | Pending |
| FRG-1509 | Audit platform API surface; optional: add requirement for platform Repo Studio support. | Pending |
| FRG-1510 | Phase 15 plan 01 summary and STATE/ROADMAP/DECISIONS/TASK-REGISTRY updates (this plan’s documentation pass). | In progress |

---

<context>
@.planning/PROJECT.md
@.planning/REQUIREMENTS.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/DECISIONS.md
@.planning/TASK-REGISTRY.md
@.planning/phases/15-strategic-shift-repo-studio-platform-focus/15-CONTEXT.md
@.planning/phases/15-strategic-shift-repo-studio-platform-focus/15-PRD.md
</context>
