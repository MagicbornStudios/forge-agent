---
phase: 04-story-domain-codex-writer
plan: 04
wave: 4
depends_on:
  - '04-02'
  - '04-03'
files_modified:
  - packages/repo-studio/README.md
  - packages/repo-studio/docs/05-assistant.md
  - packages/repo-studio/docs/06-story-domain.md
  - packages/repo-studio/src/__tests__/*.test.mjs
  - .planning/phases/04-story-domain-codex-writer/04-04-SUMMARY.md
autonomous: true
must_haves:
  truths:
    - "Story-domain runbooks must document loop-assistant versus codex-assistant responsibilities clearly."
    - "Scope override and approval-gated write behavior must be documented and test-backed."
  artifacts:
    - path: ".planning/phases/04-story-domain-codex-writer/04-04-SUMMARY.md"
      provides: "Docs + tests completion summary for story-domain codex workflows."
      min_lines: 10
  key_links:
    - from: ".planning/ROADMAP.md"
      to: ".planning/phases/04-story-domain-codex-writer/04-04-SUMMARY.md"
      via: "phase-to-summary traceability"
---

<objective>
Close Story domain release-readiness with tests, runbooks, and loop continuity artifacts.
</objective>

<context>
@packages/repo-studio/README.md
@packages/repo-studio/docs
@packages/repo-studio/src/__tests__
@.planning
</context>

<tasks>
<task type="auto">
  <name>Document story-domain codex workflows</name>
  <files>packages/repo-studio/README.md, packages/repo-studio/docs/*</files>
  <action>Add setup and operations docs for story roots, scope overrides, dual assistants, diff review, and git panel usage.</action>
  <verify>Human users can follow docs to complete one codex-assisted story edit with review approval and commit.</verify>
  <done>Package docs are decision-complete for story-domain usage.</done>
</task>

<task type="auto">
  <name>Expand automated coverage</name>
  <files>packages/repo-studio/src/__tests__/*.test.mjs, apps/repo-studio tests as needed</files>
  <action>Add tests for scope guard behavior, story parser ordering, and assistant route split guarantees.</action>
  <verify>Targeted story-domain and routing tests pass in CI package test flow.</verify>
  <done>Key story/codex safety guarantees are regression-tested.</done>
</task>
</tasks>
