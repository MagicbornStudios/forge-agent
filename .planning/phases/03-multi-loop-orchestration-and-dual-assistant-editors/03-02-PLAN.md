---
phase: 03-multi-loop-orchestration-and-dual-assistant-editors
plan: 02
wave: 2
depends_on:
  - '03-01'
files_modified:
  - apps/repo-studio/src/components/RepoStudioShell.tsx
  - apps/repo-studio/src/components/features/assistant/AssistantWorkspace.tsx
  - apps/repo-studio/app/api/assistant-chat/route.ts
  - .repo-studio/config.json
autonomous: true
must_haves:
  truths:
    - "RepoStudio exposes separate Loop Assistant and Codex Assistant editor surfaces."
    - "Codex assistant path enforces app-server-first readiness and explicit fallback policy."
  artifacts:
    - path: ".planning/phases/03-multi-loop-orchestration-and-dual-assistant-editors/03-02-SUMMARY.md"
      provides: "Execution summary for dual-assistant editor work."
      min_lines: 10
  key_links:
    - from: ".planning/ROADMAP.md"
      to: ".planning/phases/03-multi-loop-orchestration-and-dual-assistant-editors/03-02-SUMMARY.md"
      via: "phase-to-summary traceability"
---

<objective>
Harden dual-assistant editor operations in RepoStudio (loop orchestration vs codex code ops) with codex app-server-first routing.
</objective>

<context>
@apps/repo-studio/src/components
@apps/repo-studio/app/api/assistant-chat
@.repo-studio/config.json
</context>

<tasks>
<task type="auto">
  <name>Split assistant workspace into loop + codex editors</name>
  <files>apps/repo-studio/src/components/RepoStudioShell.tsx, apps/repo-studio/src/components/features/assistant/AssistantWorkspace.tsx</files>
  <action>Expose dedicated panel IDs and editor-target-aware assistant transport behavior.</action>
  <verify>Both assistant panels render and route requests with editor-specific mode controls.</verify>
  <done>Users can switch between orchestration and code-operation assistant editors without ambiguity.</done>
</task>

<task type="auto">
  <name>Enforce codex app-server-first route behavior</name>
  <files>apps/repo-studio/app/api/assistant-chat/route.ts</files>
  <action>Add codex status/start checks and explicit exec fallback gating for codex-assistant requests.</action>
  <verify>Codex-assistant returns actionable remediation when app-server path is unavailable.</verify>
  <done>Codex mode is deterministic and policy-controlled.</done>
</task>
</tasks>

