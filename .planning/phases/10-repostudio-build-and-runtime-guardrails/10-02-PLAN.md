---
phase: 10-repostudio-build-and-runtime-guardrails
plan: 02
wave: 2
depends_on:
  - '10-01'
files_modified:
  - packages/repo-studio/src/lib/dependency-health.mjs
  - apps/repo-studio/src/lib/dependency-health.ts
  - packages/repo-studio/src/commands/doctor.mjs
  - apps/repo-studio/app/api/repo/runtime/deps/route.ts
  - apps/repo-studio/src/lib/api/types.ts
  - apps/repo-studio/src/components/features/env/EnvWorkspace.tsx
autonomous: true
must_haves:
  truths:
    - "RepoStudio doctor must include CSS package checks for tw-animate-css and tailwindcss-animate."
    - "App and package runtime dependency diagnostics must stay contract-parity."
    - "Outputs must keep Forge Loop artifacts traceable and deterministic for repeat runs."
  artifacts:
    - path: ".planning/phases/10-repostudio-build-and-runtime-guardrails/10-02-SUMMARY.md"
      provides: "RepoStudio CSS dependency doctor hardening summary."
      min_lines: 10
  key_links:
    - from: ".planning/ERRORS.md"
      to: ".planning/phases/10-repostudio-build-and-runtime-guardrails/10-02-SUMMARY.md"
      via: "tw-animate recurrence prevention"
---

<objective>
Extend RepoStudio dependency health checks to catch CSS package resolution issues before runtime/build failures.
</objective>

<context>
@.planning/ROADMAP.md
@.planning/ERRORS.md
@apps/repo-studio/app/globals.css
@packages/repo-studio/src/lib/dependency-health.mjs
</context>

<tasks>
<task type="auto">
  <name>Add CSS package resolvability checks to dependency-health modules</name>
  <files>packages/repo-studio/src/lib/dependency-health.mjs, apps/repo-studio/src/lib/dependency-health.ts</files>
  <action>Add `cssPackagesResolved` plus detailed status entries for required CSS packages, with deterministic resolution paths.</action>
  <verify>Health output marks unresolved CSS packages with actionable details and resolution guidance.</verify>
  <done>Missing CSS package dependencies are detected without full Next build execution.</done>
</task>

<task type="auto">
  <name>Propagate updated health contract to doctor/API/UI types</name>
  <files>packages/repo-studio/src/commands/doctor.mjs, apps/repo-studio/app/api/repo/runtime/deps/route.ts, apps/repo-studio/src/lib/api/types.ts, apps/repo-studio/src/components/features/env/EnvWorkspace.tsx</files>
  <action>Include CSS package health in `ok` computation and expose it in app diagnostics surfaces.</action>
  <verify>`forge-repo-studio doctor --json` and `/api/repo/runtime/deps` include new fields and deterministic `ok` behavior.</verify>
  <done>RepoStudio diagnostics are complete for both style imports and package-level CSS dependencies.</done>
</task>

<task type="auto">
  <name>Update loop artifacts and traceability</name>
  <files>.planning/STATE.md, .planning/TASK-REGISTRY.md, .planning/DECISIONS.md, .planning/ERRORS.md</files>
  <action>Record outcomes, blockers, and requirement trace links for this plan wave.</action>
  <verify>forge-loop progress --json reflects current plan/task routing accurately.</verify>
  <done>Loop state and roadmap remain consistent with implementation state.</done>
</task>
</tasks>
