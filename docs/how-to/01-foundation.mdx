---
title: 01 - Foundation

created: 2026-02-04
updated: 2026-02-07
---

# 01 - Foundation

Repo structure, packages, and key concepts so you can run the app and navigate the codebase.

## Repo structure

- **apps/studio/** - Next.js app: App Shell, modes, CopilotKit, Payload, API routes.
- **packages/shared/** - Editor UI kit and headless contracts (`EditorShell`, `DockLayout`, toolbars, overlays).
- **packages/domain-forge/** - Dialogue domain: types, operations, Copilot contract (actions, context, suggestions).
- **packages/ui/** - shadcn UI atoms (Button, Card, Dialog, etc.).
- **packages/types/** - Payload-generated types and domain aliases (`ForgeGraphDoc`, etc.).
- **docs/** - Documentation; how-tos live in `docs/how-to/`.

## Key concepts

- **App Shell**: Owns mode tabs and active mode. Only one mode is mounted at a time. See `apps/studio/components/AppShell.tsx` and `apps/studio/lib/app-shell/store.ts`.
- **Mode**: A domain-specific editor (Dialogue = graph, Video = timeline). Each uses `EditorShell` from shared and composes ModeHeader, ModeToolbar, DockLayout, ModeStatusBar, ModeOverlaySurface.
- **Domain**: Logic and Copilot contract for a mode (e.g. `packages/domain-forge`). Types come from `packages/types`.

## Running the app

```bash
pnpm install
pnpm dev
```

Configure `.env.local` (e.g. `OPENROUTER_API_KEY`, `PAYLOAD_SECRET`). After changing Payload collections, run `pnpm payload:types`.

## What the AI can do at this stage

N/A - concepts only. No mode or agent wiring yet.

**Next:** [02 - Editor shell and slots](02-workspace-shell.md)
