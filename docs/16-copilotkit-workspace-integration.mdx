---
title: CopilotKit workspace integration
created: 2026-02-04
updated: 2026-02-04
---

# CopilotKit workspace integration

## Pattern: context + actions

- **Context** describes current state so the agent can reason (e.g. which workspace, what graph, dirty state). Supply it via `useCopilotReadable` in the workspace component.
- **Actions** perform edits. Register them with `useCopilotAction`; the agent calls them to change the graph, document, etc.

The agent uses context to answer questions like “What’s in the graph?” and uses actions to apply changes (create node, update node, save, etc.).

## Stable action IDs (conventions)

- `workspace.save` — Save (when implemented in toolbar).
- Graph actions: `createNode`, `updateNode`, `deleteNode`, `createEdge`, `getGraph` (see `lib/copilot-actions.ts`).

Even if an action is disabled, it should exist so the UI stays consistent.

## Workspace context shape (Forge)

Forge exposes to the agent:

- `workspaceId`: `"forge"`
- `editorType`: `"reactflow"`
- `graphSummary`: `{ title, nodeCount, edgeCount, nodeIds }` or `null` when no graph
- `isDirty`: boolean

Other workspaces (e.g. Writer/Lexical) can expose their own summary (e.g. document title, word count, selection).

## Selection-aware instructions

When the user says “change this node” or “edit the selected one”, the agent should use the current selection. Forge currently does not expose selected node IDs in context; that can be added by including `selectedNodeIds` in the value passed to `useCopilotReadable` and wiring it from the graph store or React Flow state.

## No imperative toolbar

The agent does not add or remove toolbar buttons. It uses existing actions (Save, graph ops) only.
