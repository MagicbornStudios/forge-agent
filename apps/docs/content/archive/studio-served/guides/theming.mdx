---
title: Theming & Styling
created: 2026-02-12
updated: 2026-02-12
icon: "üé®"
---

# üé® Theming & Styling System

**Complete guide to Forge's theming system with CSS variables, theme switching, and customization**

Learn how to customize the appearance of your Forge editors using our flexible theming system based on CSS variables and data attributes.

---

## Overview

Forge uses a **CSS variable-based theming system** that provides:

- Light and dark themes out of the box
- Per-editor theme overrides
- Density modes (compact/comfortable)
- Semantic color tokens
- Component-specific variables
- Data attribute scoping

---

## Core CSS Variables

### Color System

```css
/* Root color tokens */
:root {
  /* Brand colors */
  --primary: 220 90% 56%;
  --primary-foreground: 0 0% 100%;

  /* Background layers */
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;

  /* UI states */
  --muted: 210 40% 96%;
  --muted-foreground: 215 16% 47%;
  --accent: 210 40% 96%;
  --accent-foreground: 222 47% 11%;

  /* Semantic colors */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --success: 142 76% 36%;
  --warning: 38 92% 50%;
  --info: 199 89% 48%;

  /* Borders */
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 220 90% 56%;

  /* Editor-specific */
  --canvas: 0 0% 98%;
  --sidebar: 0 0% 100%;
  --sidebar-border: 214 32% 91%;
  --editor-border: 214 32% 91%;

  /* Radius */
  --radius: 0.5rem;
}

/* Dark theme */
.dark {
  --background: 222 47% 11%;
  --foreground: 210 40% 98%;
  --card: 222 47% 15%;
  --card-foreground: 210 40% 98%;
  --muted: 217 33% 17%;
  --muted-foreground: 215 20% 65%;
  --border: 217 33% 20%;
  --canvas: 222 47% 8%;
  --sidebar: 222 47% 13%;
  /* ... more dark theme variables */
}
```

### Spacing System

```css
:root {
  /* Panel spacing */
  --panel-padding: 16px;
  --panel-gap: 12px;

  /* Control spacing */
  --control-gap: 8px;
  --control-padding-x: 12px;
  --control-padding-y: 6px;

  /* Component-specific */
  --toolbar-height: 48px;
  --statusbar-height: 28px;
  --menubar-height: 36px;

  /* Badge */
  --badge-padding-x: 6px;
  --badge-padding-y: 2px;

  /* Shadows */
  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* Compact density */
[data-density="compact"] {
  --panel-padding: 12px;
  --control-gap: 6px;
  --control-padding-x: 8px;
  --control-padding-y: 4px;
  --toolbar-height: 40px;
}

/* Comfortable density */
[data-density="comfortable"] {
  --panel-padding: 20px;
  --control-gap: 10px;
  --control-padding-x: 16px;
  --control-padding-y: 8px;
  --toolbar-height: 56px;
}
```

### Graph Colors

```css
:root {
  /* Node colors */
  --graph-node-page-border: 147 60% 60%;
  --graph-node-page-bg: 147 60% 95%;
  --graph-node-npc-border: 217 91% 60%;
  --graph-node-npc-bg: 217 91% 95%;
  --graph-node-player-border: 142 76% 36%;
  --graph-node-player-bg: 142 76% 90%;
  --graph-node-conditional-border: 38 92% 50%;
  --graph-node-conditional-bg: 38 92% 90%;

  /* Edge colors */
  --graph-edge-default: 215 16% 47%;
  --graph-edge-choice-1: 199 89% 48%;
  --graph-edge-choice-2: 142 76% 36%;
  --graph-edge-choice-3: 271 81% 56%;
}
```

---

## Theme Switching

### Per-Editor Themes

Editors can have independent theme settings:

```typescript
// From CharacterWorkspace.tsx
const editorTheme = useSettingsStore((s) =>
  s.getSettingValue('ui.theme', { editorId: 'character' })
) as string | undefined;

<EditorShell
  editorId="character"
  title="Characters"
  theme={editorTheme}  // 'light', 'dark', or undefined (system)
>
  {/* editor content */}
</EditorShell>
```

### System Theme

Respects OS theme preference when not overridden:

```typescript
// EditorShell applies theme via data attribute
<div
  data-theme={theme ?? 'system'}
  data-editor-id={editorId}
  data-domain={domain}
>
  {children}
</div>
```

### Theme Provider

```typescript
// Global theme provider
export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState<'light' | 'dark' | 'system'>('system');

  useEffect(() => {
    const root = window.document.documentElement;

    if (theme === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light';
      root.classList.remove('light', 'dark');
      root.classList.add(systemTheme);
    } else {
      root.classList.remove('light', 'dark');
      root.classList.add(theme);
    }
  }, [theme]);

  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}
```

---

## Density Modes

Control spacing and sizing across your editor:

```typescript
const editorDensity = useSettingsStore((s) =>
  s.getSettingValue('ui.density', { editorId: 'dialogue' })
) as string | undefined;

<EditorShell
  editorId="dialogue"
  density={editorDensity}  // 'compact', 'comfortable', or undefined (default)
>
  {/* density affects all internal spacing */}
</EditorShell>
```

---

## Component-Specific Variables

### Toolbar

```css
.editor-toolbar {
  height: var(--toolbar-height);
  padding: 0 var(--panel-padding);
  background: hsl(var(--sidebar));
  border-bottom: 1px solid hsl(var(--sidebar-border));
}
```

### Panels

```css
.editor-panel {
  padding: var(--panel-padding);
  background: hsl(var(--card));
  border: 1px solid hsl(var(--editor-border));
}

.editor-panel-header {
  padding: var(--control-padding-y) var(--control-padding-x);
  margin-bottom: var(--panel-gap);
  border-bottom: 1px solid hsl(var(--border));
}
```

### Buttons

```css
.button {
  padding: var(--control-padding-y) var(--control-padding-x);
  gap: var(--control-gap);
  border-radius: var(--radius);
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

.button:hover {
  background: hsl(var(--primary) / 0.9);
}
```

---

## Custom Themes

### Create a Custom Theme

```css
/* app/styles/themes/midnight.css */
[data-theme="midnight"] {
  --primary: 240 100% 70%;
  --primary-foreground: 0 0% 100%;
  --background: 240 20% 8%;
  --foreground: 240 10% 95%;
  --card: 240 18% 12%;
  --border: 240 15% 20%;
  --canvas: 240 22% 6%;
  --sidebar: 240 19% 10%;

  /* Custom accent colors */
  --accent: 280 80% 60%;
  --accent-foreground: 0 0% 100%;
}
```

### Register Custom Theme

```typescript
// app/lib/themes/registry.ts
export const THEME_OPTIONS = [
  { value: 'light', label: 'Light' },
  { value: 'dark', label: 'Dark' },
  { value: 'midnight', label: 'Midnight Blue' },
  { value: 'forest', label: 'Forest Green' },
] as const;

// Settings configuration
{
  scope: 'editor',
  key: 'ui.theme',
  type: 'select',
  options: THEME_OPTIONS,
  defaultValue: 'system',
}
```

---

## Data Attribute Scoping

Scope styles to specific editors or viewports:

```css
/* All editors */
[data-editor-id] {
  font-family: var(--font-sans);
}

/* Specific editor */
[data-editor-id="dialogue"] {
  --canvas: hsl(220 20% 98%);
}

/* Specific domain */
[data-domain="character"] .node {
  border-radius: 50%;
}

/* Viewport-specific */
[data-viewport-scope="narrative"] {
  --graph-edge-default: hsl(199 89% 48%);
}

[data-viewport-scope="storylet"] {
  --graph-edge-default: hsl(271 81% 56%);
}
```

---

## Real Examples from Editors

### DialogueWorkspace Theme Integration

```typescript
// From DialogueWorkspace.tsx
const editorTheme = useSettingsStore((s) =>
  s.getSettingValue('ui.theme', { editorId: 'dialogue' })
) as string | undefined;

const editorDensity = useSettingsStore((s) =>
  s.getSettingValue('ui.density', { editorId: 'dialogue' })
) as string | undefined;

<EditorShell
  editorId="dialogue"
  title="Dialogue"
  subtitle={activeGraph?.title}
  domain="dialogue"
  theme={editorTheme}
  density={editorDensity}
  className="flex flex-col h-full min-h-0 bg-canvas"
>
  {/* Editor content inherits theme and density */}
</EditorShell>
```

### ForgeGraphPanel Active State

```typescript
// Visual accent for active viewport
<div
  className={cn(
    'flex min-h-0 flex-1 flex-col border border-editor-border bg-editor',
    isActive && 'border-t-2'
  )}
  style={isActive ? { borderTopColor: accentColor } : undefined}
  data-viewport-scope={scope}
>
  {/* Panel content */}
</div>
```

---

## Theme Persistence

Themes are persisted via the settings system:

```typescript
// From lib/settings/store.ts
export const useSettingsStore = create<SettingsState>()(
  devtools(
    persist(
      immer((set, get) => ({
        // Settings stored in localStorage
        appSettings: {},
        editorSettings: {},
        // ...
      })),
      {
        name: 'forge-settings',
        storage: createJSONStorage(() => localStorage),
      }
    )
  )
);
```

---

## Tailwind Integration

Forge uses Tailwind CSS with custom color tokens:

```javascript
// tailwind.config.ts
module.exports = {
  theme: {
    extend: {
      colors: {
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
        // ... more color mappings
      },
      borderRadius: {
        lg: 'var(--radius)',
        md: 'calc(var(--radius) - 2px)',
        sm: 'calc(var(--radius) - 4px)',
      },
    },
  },
};
```

Usage in components:

```typescript
<div className="bg-card text-card-foreground border-border">
  <Button className="bg-primary text-primary-foreground">
    Click me
  </Button>
</div>
```

---

## Best Practices

### 1. Use Semantic Tokens

```css
/* ‚ùå Bad: Direct colors */
.my-panel {
  background: #1a1a1a;
  color: #ffffff;
}

/* ‚úÖ Good: Semantic tokens */
.my-panel {
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
}
```

### 2. Respect Density

```css
/* ‚ùå Bad: Fixed spacing */
.my-button {
  padding: 8px 12px;
}

/* ‚úÖ Good: Density-aware */
.my-button {
  padding: var(--control-padding-y) var(--control-padding-x);
}
```

### 3. Scope Custom Styles

```css
/* ‚ùå Bad: Global override */
.button {
  border-radius: 0;
}

/* ‚úÖ Good: Scoped to your editor */
[data-editor-id="my-editor"] .button {
  border-radius: 0;
}
```

### 4. Test Both Themes

Always test light and dark themes:

```typescript
// Use ThemeToggle component
import { ThemeToggle } from '@/components/theme-toggle';

<ThemeToggle />
```

---

## Customization Examples

### Example 1: Custom Node Colors

```css
/* Custom node type for your editor */
[data-domain="quest"] .graph-node[data-node-type="quest-start"] {
  --node-border: 280 80% 60%;
  --node-bg: 280 80% 95%;
}

.graph-node {
  border: 2px solid hsl(var(--node-border));
  background: hsl(var(--node-bg));
}
```

### Example 2: Editor-Specific Canvas

```css
[data-editor-id="video"] {
  --canvas: hsl(0 0% 10%);  /* Dark canvas for video editor */
}

[data-editor-id="character"] {
  --canvas: hsl(147 20% 98%);  /* Light green tint */
}
```

### Example 3: Custom Panel Accents

```typescript
const sidebarTabs: PanelTabDef[] = [
  {
    id: 'narratives',
    label: 'Narratives',
    icon: <BookOpen size={12} />,
    content: <NarrativeList />,
    accentColor: 'var(--status-info)',  // Blue accent
  },
  {
    id: 'storylets',
    label: 'Storylets',
    icon: <Layers size={12} />,
    content: <StoryletList />,
    accentColor: 'var(--graph-edge-choice-1)',  // Purple accent
  },
];

<WorkspacePanel panelId="left" tabs={sidebarTabs} />
```

---

## Summary

### Key Concepts

1. **CSS Variables** - All colors and spacing use CSS custom properties
2. **Data Attributes** - Scope styles with `data-theme`, `data-editor-id`, `data-domain`
3. **Semantic Tokens** - Use semantic colors (primary, muted, etc.) not direct values
4. **Theme Switching** - Per-editor themes with system default
5. **Density Modes** - Compact/comfortable spacing presets
6. **Persistence** - Settings stored in localStorage

### Next Steps

- [Component Patterns](./patterns.mdx) - Build consistent components
- [Performance Guide](./performance.mdx) - Optimize rendering
- [AI Integration](../tutorials/ai-integration.mdx) - Add AI features

---

**Complete Variable Reference**

See the full list of CSS variables in:
- `packages/shared/src/styles/variables.css`
- `apps/studio/app/globals.css`

---

**You now have complete control over your editor's appearance with Forge's flexible theming system.**
