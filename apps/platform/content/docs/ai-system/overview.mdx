---
title: AI System Overview
created: 2026-02-11
updated: 2026-02-11
icon: "ğŸ¤–"
---

# ğŸ¤– AI System Overview

**AI-powered workflows for creative tools**

Forge provides deep integration with AI systems to augment your editors with intelligent assistants, automated workflows, and multi-agent coordination.

---

## Current Status

### âœ… Production Ready

**Studio & Editor Components**
- EditorShell, DockLayout, Toolbar, Inspector, Settings
- Complete component API with TypeScript safety
- Hierarchical settings system with UI-first design
- Selection-driven inspector panels
- Modal and overlay systems

### ğŸš§ Active Development

**AI Workflows & Integration**
- Domain contract system (interface defined, implementations in progress)
- Tool execution with custom rendering
- Plan-review-execute workflows
- Multi-agent coordination patterns
- LangGraph integration for complex workflows

### ğŸ“‹ Planned Features

See our [Roadmap](../roadmap) for upcoming AI features.

---

## What We're Building

Forge isn't just another chatbot wrapper. We're building a comprehensive AI integration layer that treats AI as a **first-class citizen** in the editor experience.

### ğŸ¯ Vision

- **Domain-Specific Agents** - AI that understands your editor's context and domain
- **Tool-Augmented Workflows** - AI can execute operations, not just chat
- **Plan-Review-Execute** - User approval gates for multi-step operations
- **Multi-Agent Coordination** - Agents collaborate across editors and domains
- **Cost Optimization** - Intelligent model routing and prompt caching

---

## Architecture

### Domain Contracts

AI agents are defined using **Domain Contracts** - a structured interface that describes:

```typescript
interface DomainAssistantContract {
  domain: string;                          // 'character', 'forge', 'writer'
  getInstructions(): string;               // Agent system prompt
  createTools(): DomainTool[];             // Available operations
  getContextSnapshot(): DomainContextSnapshot;  // Current editor state
  getSuggestions(): Suggestion[];          // Quick action suggestions
  onHighlight(entities: Record<string, string[]>): void;  // Visual feedback
  clearHighlights(): void;
}
```

### Example: Task Manager Domain Contract

```typescript
export function useTaskAssistantContract(deps: TaskDeps): DomainAssistantContract {
  return {
    domain: 'tasks',

    getInstructions: () =>
      'You are helping manage tasks in a task manager. ' +
      'You can create, update, complete, and organize tasks. ' +
      'Use task_* tools to modify tasks.',

    createTools: () => [
      {
        name: 'task_create',
        description: 'Create a new task',
        parameters: {
          type: 'object',
          properties: {
            title: { type: 'string' },
            description: { type: 'string' },
            priority: { type: 'string', enum: ['low', 'medium', 'high'] },
          },
          required: ['title'],
        },
        execute: async (args) => {
          const task = await createTask(args);
          return { success: true, taskId: task.id };
        },
        render: (result) => (
          <TaskCreatedCard taskId={result.taskId} />
        ),
      },
      // More tools...
    ],

    getContextSnapshot: () => ({
      domain: 'tasks',
      data: {
        taskCount: tasks.length,
        completedCount: tasks.filter(t => t.completed).length,
        selectedTask: activeTask?.id,
      },
    }),

    onHighlight: (entities) => {
      // Highlight tasks in UI
    },
  };
}
```

---

## AI Workflows

### 1. Simple Tool Execution

User asks for a single operation:

```
User: "Create a character node for Dr. Chen"

[FORGE AGENT]
â†’ Calls forge_createNode
â†’ Highlights new node in graph
â†’ Returns success card in chat
```

### 2. Plan-Review-Execute

User asks for complex multi-step operation:

```
User: "Create a branching dialogue with 3 choices"

[FORGE AGENT]
â†’ Creates plan with 5 steps
â†’ Shows PlanReviewCard in chat

User: [Clicks "Approve"]

[FORGE AGENT]
â†’ Executes each step
â†’ Shows progress
â†’ Highlights created nodes
â†’ Returns summary
```

### 3. Multi-Agent Coordination

User request spans multiple domains:

```
User: "Create a character and use them in a dialogue"

[APP AGENT ORCHESTRATOR]
â†’ Delegates to CHARACTER AGENT
  â†’ Creates character in database
  â†’ Returns character ID

â†’ Delegates to FORGE AGENT
  â†’ Creates dialogue node
  â†’ References character by ID
  â†’ Highlights node in graph

â†’ Returns unified summary
```

---

## Tool System

Tools are the bridge between AI and your editor. Each tool:

1. **Defines parameters** - TypeScript-safe schema
2. **Executes operations** - Modifies editor state
3. **Returns results** - Structured data
4. **Renders UI** - Custom React components in chat

### Tool Definition

```typescript
interface DomainTool {
  domain: string;                    // 'forge', 'character', etc.
  name: string;                      // 'forge_createNode'
  description: string;               // For AI model
  parameters: JSONSchema;            // Tool arguments
  execute: (args, context) => Promise<unknown>;
  render?: (result) => ReactNode;    // Optional custom UI
}
```

### Tool Example

```typescript
{
  domain: 'forge',
  name: 'forge_createNode',
  description: 'Create a new dialogue node in the graph',

  parameters: {
    type: 'object',
    properties: {
      nodeType: {
        type: 'string',
        enum: ['CHARACTER', 'PLAYER', 'CONDITIONAL'],
      },
      label: { type: 'string' },
      content: { type: 'string' },
      characterId: { type: 'string' },  // Cross-domain reference
    },
    required: ['nodeType', 'label'],
  },

  execute: async (args, context) => {
    const nodeId = generateId();

    // Apply operation to graph
    context.applyOperations([{
      type: 'createNode',
      nodeType: args.nodeType,
      data: {
        label: args.label,
        content: args.content,
        characterId: args.characterId,  // Reference to character DB
      },
      id: nodeId,
    }]);

    // Highlight in UI
    context.onHighlight({ 'forge.node': [nodeId] });

    return {
      success: true,
      nodeId,
      message: `Created ${args.nodeType} node`,
    };
  },

  render: (result) => (
    <div className="rounded-lg border bg-card p-3">
      <p className="font-medium text-sm">Node Created</p>
      <p className="text-xs text-muted-foreground mt-1">
        {result.message}
      </p>
      <p className="text-xs text-muted-foreground">
        ID: <code>{result.nodeId}</code>
      </p>
    </div>
  ),
}
```

---

## Model Routing

Forge uses intelligent model routing to optimize cost and quality:

### Complexity-Based Routing

```typescript
// Trivial operations â†’ Fast, cheap models
"Create a node" â†’ gpt-4o-mini ($0.15/1M tokens)

// Simple operations â†’ Balanced models
"Create 3 nodes with dialogue" â†’ gpt-4o ($2.50/1M tokens)

// Complex operations â†’ Powerful models
"Design a branching storylet" â†’ claude-3.5-sonnet ($3/1M tokens)

// Creative operations â†’ Best quality
"Write dialogue in character voice" â†’ claude-3.5-sonnet
```

### Cost Optimization Techniques

- **Prompt Caching** - Cache domain instructions (81% cost reduction)
- **Batching** - Process multiple operations in one call (80% savings)
- **Model Selection** - Route by complexity (75-90% savings)
- **Context Management** - Minimize input tokens

**Example Impact:**
- Naive approach: $135/month
- Optimized approach: $13.80/month
- **90% cost reduction**

See [Cost Optimization](/docs/ai) for details.

---

## Integration Patterns

### 1. Add AI to Existing Editor

```typescript
import { EditorShell } from '@forge/dev-kit';
import { useTaskAssistantContract } from './task-assistant';

export function TaskEditor() {
  const assistantContract = useTaskAssistantContract({
    tasks,
    activeTask,
    createTask: (task) => {
      // Create task in your state
    },
    updateTask: (id, updates) => {
      // Update task in your state
    },
    onHighlight: (entities) => {
      // Highlight tasks in UI
    },
  });

  return (
    <EditorShell editorId="tasks" title="Tasks">
      {/* ... editor UI ... */}

      <AssistantPanel contract={assistantContract} />
    </EditorShell>
  );
}
```

### 2. Create Custom Domain

```typescript
export function useMyDomainContract(): DomainAssistantContract {
  return {
    domain: 'my-domain',

    getInstructions: () => `
      You help users with ${domain} tasks.
      Available operations: ...
      Context: ...
    `,

    createTools: () => [
      {
        name: 'my_domain_action',
        description: '...',
        parameters: { /* ... */ },
        execute: async (args) => {
          // Your domain logic
        },
      },
    ],

    getContextSnapshot: () => ({
      domain: 'my-domain',
      data: {
        // Your editor state
      },
    }),
  };
}
```

### 3. Cross-Domain Operations

```typescript
// Project domain creates entity
const project = await projectAgent.execute('project_create', {
  name: 'Website Redesign',
});

// Task domain references entity
await taskAgent.execute('task_create', {
  title: 'Design mockups',
  projectId: project.id,  // Cross-domain reference
  assignee: project.owner,
});
```

---

## Workflows & LangGraph

For complex multi-step workflows with checkpoints:

### When to Use LangGraph

- **Plan iteration** - User can modify plans before execution
- **Checkpoints** - Resume workflows across sessions
- **Multi-agent** - Coordinate between multiple AI agents
- **State machines** - Complex conditional flows

### Example: Plan Workflow

```typescript
// 1. Create plan
const plan = await createPlan({
  goal: "Create branching dialogue",
  context: graphSnapshot,
});
// Checkpoint saved: checkpoint_001

// 2. User modifies plan
const modifiedPlan = await modifyPlan(plan.checkpointId, {
  modifications: "Add a fourth choice branch",
});
// Checkpoint saved: checkpoint_002

// 3. Execute plan
const result = await executePlan(modifiedPlan.checkpointId);
// Checkpoint saved: checkpoint_003 (completed)
```

---

## Current Implementation Status

### âœ… Completed

| Component | Status | Location |
|-----------|--------|----------|
| Domain Contract Interface | âœ… Stable | `packages/shared/src/shared/assistant/domain-contract.ts` |
| Forge Domain | âœ… Active | `packages/domain-forge/src/assistant/` |
| Assistant UI Integration | âœ… Active | `apps/studio/app/api/assistant-chat/route.ts` |
| Tool Rendering | âœ… Active | Custom render functions per tool |
| Context Snapshots | âœ… Active | Per-domain snapshot providers |

### ğŸš§ In Progress

| Component | Status | Next Steps |
|-----------|--------|------------|
| Character Domain Tools | ğŸš§ Partial | Implement tool functions |
| Writer Domain | ğŸš§ Planning | Create domain package |
| LangGraph Integration | ğŸš§ Design | Checkpoint persistence with IndexedDB |
| Multi-Agent Orchestration | ğŸš§ Design | APP AGENT coordinator |
| MCP Integration | ğŸ“‹ Planned | Model Context Protocol support |

See [Complete System Architecture](/docs/ai) for full details.

---

## API Reference

### Domain Contract Methods

```typescript
// Get agent instructions (system prompt)
contract.getInstructions(): string

// Get available tools
contract.createTools(): DomainTool[]

// Get current editor context
contract.getContextSnapshot(): DomainContextSnapshot

// Get quick action suggestions
contract.getSuggestions(): Suggestion[]

// Highlight entities in UI
contract.onHighlight(entities: Record<string, string[]>): void

// Clear highlights
contract.clearHighlights(): void
```

### Tool Execution

```typescript
// Execute a tool
const result = await tool.execute(args, context);

// Render result in chat
const ui = tool.render?.(result) || <JSONDisplay data={result} />;
```

---

## Examples & Guides

### Conversation Flows

See complete examples with multi-agent coordination:

- [Agent Conversation Flows](/docs/ai)
- [Story Builder Workflow](/docs/ai)
- [Workflow Complexity Guide](/docs/ai)

### Implementation Guides

- [AI Roadmap](/docs/ai) - Quarterly development phases
- [Model Strategy](/docs/ai) - Multi-model routing
- [Technical Considerations](/docs/ai) - Architecture decisions
- [Cost Optimization](/docs/ai) - 90%+ cost reduction techniques

---

## Future Vision

### Q2 2026
- âœ… Complete Character domain implementation
- âœ… Writer domain with Notion-style pages
- âœ… LangGraph checkpoint persistence
- âœ… Multi-agent coordination

### Q3 2026
- ğŸ¨ Multimodal AI (vision, audio, image generation)
- ğŸ”— MCP integration for editor apps
- ğŸ¯ Advanced model routing with suitability scores
- ğŸ“Š Analytics and cost tracking

### Q4 2026
- âš¡ Real-time collaboration with AI
- ğŸŒ Distributed agent systems
- ğŸ”Œ Plugin ecosystem for custom domains
- ğŸ“š Community agent marketplace

---

## Get Started

Ready to add AI to your editor?

1. **Understand Domain Contracts** - Read [Domain Contracts Guide](../developer-guide/domain-contracts)
2. **Create Tools** - See [Tool System Guide](../developer-guide/tool-system)
3. **Implement Workflows** - Check [Custom Workflows](../developer-guide/custom-workflows)
4. **Optimize Costs** - Review [Cost Optimization](/docs/ai)

---

## Status Summary

<div className="rounded-lg border p-4 my-6">
  <h3 className="font-semibold mb-2">ğŸ—ï¸ What's Solid</h3>
  <p className="text-sm text-muted-foreground mb-3">
    Our studio components, settings system, and editor infrastructure are production-ready.
    These APIs are stable and fully documented.
  </p>

  <h3 className="font-semibold mb-2">ğŸš§ What's Evolving</h3>
  <p className="text-sm text-muted-foreground">
    Our AI integration layer is actively being developed. We're fleshing out domain implementations,
    workflow kits, and multi-agent patterns. The interfaces are stable, but implementations are
    being refined based on real-world usage.
  </p>
</div>

We're transparent about our development status because we believe in building in public.
Our component APIs are crystal clear and production-ready. Our AI system is being built
with the same level of care and will reach that same level of polish.

---

**Ready to build AI-powered editors?** Start with our [Developer Guide](../developer-guide/index) â†’
